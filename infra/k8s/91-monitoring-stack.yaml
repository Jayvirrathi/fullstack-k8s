apiVersion: v1
kind: ConfigMap
metadata:
  name: loki-config
  namespace: default
data:
  loki-config.yml: "auth_enabled: false\n\nserver:\n  http_listen_port: 3100\n\ncommon:\n\
    \  path_prefix: /loki\n  storage:\n    filesystem:\n      chunks_directory: /loki/chunks\n\
    \      rules_directory: /loki/rules\n  replication_factor: 1\n  ring:\n    instance_addr:\
    \ 127.0.0.1\n    kvstore:\n      store: inmemory\n\nschema_config:\n  configs:\n\
    \  - from: 2023-01-01\n    store: boltdb-shipper\n    object_store: filesystem\n\
    \    schema: v13\n    index:\n      prefix: index_\n      period: 24h\n\nstorage_config:\n\
    \  boltdb_shipper:\n    active_index_directory: /loki/index\n    cache_location:\
    \ /loki/boltdb-cache\n    shared_store: filesystem\n\nruler:\n  storage:\n   \
    \ type: local\n    local:\n      directory: /loki/rules\n  ring:\n    kvstore:\n\
    \      store: inmemory\n  rule_path: /loki/rules-temp\n  # If you add Alertmanager\
    \ later, update this URL:\n  alertmanager_url: http://alertmanager.default.svc.cluster.local:9093\n\
    \  enable_alertmanager_v2: true\n\ncompactor:\n  working_directory: /loki/boltdb-shipper-compactor\n\
    \  shared_store: filesystem\n"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: loki
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: loki
  template:
    metadata:
      labels:
        app: loki
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 10001
        fsGroup: 10001
      containers:
      - name: loki
        image: grafana/loki:2.9.8
        args:
        - -config.file=/etc/loki/loki-config.yml
        ports:
        - containerPort: 3100
          name: http
        readinessProbe:
          httpGet:
            path: /ready
            port: http
          initialDelaySeconds: 10
          periodSeconds: 10
        livenessProbe:
          httpGet:
            path: /ready
            port: http
          initialDelaySeconds: 10
          periodSeconds: 10
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 1Gi
        volumeMounts:
        - name: loki-config
          mountPath: /etc/loki
        - name: loki-data
          mountPath: /loki
      volumes:
      - name: loki-config
        configMap:
          name: loki-config
      - name: loki-data
        emptyDir: {}
---
apiVersion: v1
kind: Service
metadata:
  name: loki
  namespace: default
spec:
  type: NodePort
  selector:
    app: loki
  ports:
  - name: http
    port: 3100
    targetPort: 3100
    nodePort: 30100
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: prometheus
  namespace: default
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus
rules:
- apiGroups:
  - ''
  resources:
  - nodes
  - nodes/proxy
  - services
  - endpoints
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: prometheus
subjects:
- kind: ServiceAccount
  name: prometheus
  namespace: default
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-config
  namespace: default
data:
  prometheus.yml: "global:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\n\
    scrape_configs:\n- job_name: 'kubernetes-service-endpoints'\n  kubernetes_sd_configs:\n\
    \  - role: endpoints\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]\n\
    \    action: keep\n    regex: true\n  - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]\n\
    \    action: replace\n    target_label: __scheme__\n    regex: (https?)\n  - source_labels:\
    \ [__meta_kubernetes_service_annotation_prometheus_io_path]\n    action: replace\n\
    \    target_label: __metrics_path__\n    regex: (.+)\n  - source_labels: [__address__,\
    \ __meta_kubernetes_service_annotation_prometheus_io_port]\n    action: replace\n\
    \    regex: ([^:]+)(?::\\d+)?;(\\d+)\n    replacement: $1:$2\n    target_label:\
    \ __address__\n  - action: labelmap\n    regex: __meta_kubernetes_service_label_(.+)\n\
    \  - source_labels: [__meta_kubernetes_namespace]\n    target_label: kubernetes_namespace\n\
    \  - source_labels: [__meta_kubernetes_service_name]\n    target_label: kubernetes_name\n\
    \n- job_name: 'api-node'\n  kubernetes_sd_configs:\n  - role: endpoints\n    namespaces:\n\
    \      names: ['ms-starter']\n  relabel_configs:\n  - source_labels: [__meta_kubernetes_service_name]\n\
    \    action: keep\n    regex: api-node\n  - source_labels: [__meta_kubernetes_endpoint_port_name]\n\
    \    action: keep\n    regex: metrics\n\n- job_name: 'api-python'\n  kubernetes_sd_configs:\n\
    \  - role: endpoints\n    namespaces:\n      names: ['ms-starter']\n  relabel_configs:\n\
    \  - source_labels: [__meta_kubernetes_service_name]\n    action: keep\n    regex:\
    \ api-python\n  - source_labels: [__meta_kubernetes_endpoint_port_name]\n    action:\
    \ keep\n    regex: metrics\n\n- job_name: 'api-go'\n  kubernetes_sd_configs:\n\
    \  - role: endpoints\n    namespaces:\n      names: ['ms-starter']\n  relabel_configs:\n\
    \  - source_labels: [__meta_kubernetes_service_name]\n    action: keep\n    regex:\
    \ api-go\n  - source_labels: [__meta_kubernetes_endpoint_port_name]\n    action:\
    \ keep\n    regex: metrics\n"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: prometheus
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus
  template:
    metadata:
      labels:
        app: prometheus
    spec:
      serviceAccountName: prometheus
      securityContext:
        runAsNonRoot: true
        runAsUser: 65534
        fsGroup: 65534
      containers:
      - name: prometheus
        image: prom/prometheus:v2.53.0
        args:
        - --config.file=/etc/prometheus/prometheus.yml
        - --storage.tsdb.path=/prometheus
        - --storage.tsdb.retention.time=7d
        - --web.enable-lifecycle
        ports:
        - containerPort: 9090
          name: web
        livenessProbe:
          httpGet:
            path: /-/healthy
            port: web
          initialDelaySeconds: 10
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /-/ready
            port: web
          initialDelaySeconds: 10
          periodSeconds: 10
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 1Gi
        volumeMounts:
        - name: config
          mountPath: /etc/prometheus
        - name: data
          mountPath: /prometheus
      volumes:
      - name: config
        configMap:
          name: prometheus-config
      - name: data
        emptyDir: {}
---
apiVersion: v1
kind: Service
metadata:
  name: prometheus
  namespace: default
  annotations:
    prometheus.io/scrape: 'true'
    prometheus.io/port: '9090'
    prometheus.io/path: /metrics
spec:
  type: ClusterIP
  selector:
    app: prometheus
  ports:
  - name: web
    port: 9090
    targetPort: 9090
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasources
  namespace: default
  labels:
    grafana_datasource: '1'
data:
  prometheus-datasource.yaml: "apiVersion: 1\ndatasources:\n- name: Prometheus\n \
    \ type: prometheus\n  access: proxy\n  url: http://prometheus.default.svc.cluster.local:9090\n\
    \  isDefault: true\n  jsonData:\n    timeInterval: 15s\n  uid: PBFA97CFB590B2093\n\
    - name: Loki\n  type: loki\n  access: proxy\n  url: http://loki.default.svc.cluster.local:3100\n\
    \  jsonData:\n    maxLines: 1000\n  uid: loki-default\n"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: grafana
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: grafana
  template:
    metadata:
      labels:
        app: grafana
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 472
        fsGroup: 472
      containers:
      - name: grafana
        image: grafana/grafana:10.4.3
        ports:
        - containerPort: 3000
          name: web
        env:
        - name: GF_SECURITY_ADMIN_USER
          value: admin
        - name: GF_SECURITY_ADMIN_PASSWORD
          value: admin
        readinessProbe:
          httpGet:
            path: /login
            port: web
          initialDelaySeconds: 10
          periodSeconds: 10
        livenessProbe:
          httpGet:
            path: /api/health
            port: web
          initialDelaySeconds: 10
          periodSeconds: 10
        volumeMounts:
        - name: grafana-datasources
          mountPath: /etc/grafana/provisioning/datasources
        - name: grafana-dashboard-providers
          mountPath: /etc/grafana/provisioning/dashboards
        - name: grafana-dashboards
          mountPath: /var/lib/grafana/dashboards
      volumes:
      - name: grafana-datasources
        configMap:
          name: grafana-datasources
      - name: grafana-dashboard-providers
        configMap:
          name: grafana-dashboard-providers
      - name: grafana-dashboards
        configMap:
          name: grafana-dashboards
---
apiVersion: v1
kind: Service
metadata:
  name: grafana
  namespace: default
spec:
  type: NodePort
  selector:
    app: grafana
  ports:
  - name: web
    port: 3000
    targetPort: 3000
    nodePort: 30030
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-providers
  namespace: default
data:
  providers.yaml: "apiVersion: 1\nproviders:\n- name: 'default'\n  orgId: 1\n  folder:\
    \ ''\n  type: file\n  disableDeletion: false\n  updateIntervalSeconds: 10\n  options:\n\
    \    path: /var/lib/grafana/dashboards\n"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: default
data:
  microservices-overview.json: '{"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":1,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"type":"text","title":"Microservices
    Overview","gridPos":{"h":3,"w":24,"x":0,"y":0},"options":{"content":"RPS, latency,
    and error rate across services","mode":"markdown"}},{"type":"timeseries","title":"Requests
    per second","gridPos":{"h":8,"w":24,"x":0,"y":3},"targets":[{"expr":"sum by (service)
    (rate(http_requests_total[5m]))","legendFormat":"{{service}}"}]},{"type":"timeseries","title":"p95
    latency (seconds)","gridPos":{"h":8,"w":12,"x":0,"y":11},"targets":[{"expr":"histogram_quantile(0.95,
    sum by (le, service) (rate(http_request_duration_seconds_bucket[5m])))","legendFormat":"{{service}}"}]},{"type":"timeseries","title":"Error
    rate (5xx %)","gridPos":{"h":8,"w":12,"x":12,"y":11},"targets":[{"expr":"100 *
    sum by (service) (rate(http_requests_total{status=~\"5..\"}[5m])) / sum by (service)
    (rate(http_requests_total[5m]))","legendFormat":"{{service}}"}]}],"refresh":"30s","schemaVersion":39,"style":"dark","tags":["microservices"],"templating":{"list":[{"name":"service","type":"query","datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"query":"label_values(http_requests_total,
    service)","includeAll":true,"refresh":2}]},"time":{"from":"now-1h","to":"now"},"timezone":"","title":"Microservices
    (Overview)","version":1,"weekStart":""}'
  prometheus-overview.json: '{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"--
    Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"enable":true,"expr":"sum(changes(prometheus_config_last_reload_success_timestamp_seconds{instance=~\"$instance\"}[10m]))
    by (instance)","hide":false,"iconColor":"rgb(0, 96, 19)","limit":100,"name":"reloads","showIn":0,"step":"5m","type":"alert"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"enable":true,"expr":"count(sum(up{instance=\"$instance\"})
    by (instance) < 1)","hide":false,"iconColor":"rgba(255, 96, 96, 1)","limit":100,"name":"down","showIn":0,"step":"5m","type":"alert"}]},"description":"Get
    started faster with Grafana Cloud then easily build these dashboards. https://grafana.com/products/cloud/\nOverview
    of metrics from Prometheus 2.0.  \nUseful for using prometheus to monitor your
    prometheus.\nRevisions welcome!","editable":true,"fiscalYearStartMonth":0,"gnetId":3662,"graphTooltip":0,"id":2,"links":[],"panels":[{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":34,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"at
    a glance","type":"row"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Percentage
    of uptime during the most recent $interval period.  Change the period with the
    ''interval'' dropdown above.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":3,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(245,
    54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":90},{"color":"rgba(50,
    172, 45, 0.97)","value":99}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":0,"y":1},"id":2,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"avg(avg_over_time(up{instance=~\"$instance\",job=~\"$job\"}[$interval])
    * 100)","format":"time_series","intervalFactor":2,"legendFormat":"","refId":"A","step":40}],"title":"Uptime
    [$interval]","type":"stat"},{"columns":[],"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Servers
    which are DOWN RIGHT NOW! \nFIX THEM!!","fontSize":"100%","gridPos":{"h":7,"w":6,"x":6,"y":1},"hideTimeOverride":true,"id":25,"scroll":true,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","align":"auto","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD
    HH:mm:ss","decimals":2,"pattern":"/__name__|job|Value/","thresholds":[],"type":"hidden","unit":"short"},{"alias":"   ","align":"auto","colorMode":"cell","colors":["rgba(255,
    0, 0, 0.9)","rgba(237, 129, 40, 0.89)","rgba(255, 0, 0, 0.97)"],"dateFormat":"YYYY-MM-DD
    HH:mm:ss","decimals":2,"link":false,"pattern":"instance","thresholds":["","",""],"type":"string","unit":"short"}],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"up{instance=~\"$instance\",job=~\"$job\"}
    < 1","format":"table","intervalFactor":2,"refId":"A","step":2}],"timeFrom":"1s","title":"Currently
    Down","transform":"table","type":"table-old"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Total
    number of time series in prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1000000},{"color":"rgba(245,
    54, 54, 0.9)","value":2000000}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":12,"y":1},"id":12,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":40}],"title":"Total
    Series","type":"stat"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31,
    120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":18,"y":1},"id":14,"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"B","step":40}],"title":"Memory
    Chunks","type":"stat"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":8},"id":35,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"quick
    numbers","type":"row"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"The
    total number of rule group evaluations missed due to slow rule group evaluation.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245,
    54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":0,"y":9},"id":16,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(sum_over_time(prometheus_evaluator_iterations_missed_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"title":"Missed
    Iterations [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"The
    total number of rule group evaluations skipped due to throttled metric storage.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245,
    54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":4,"y":9},"id":18,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(sum_over_time(prometheus_evaluator_iterations_skipped_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"title":"Skipped
    Iterations [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Total
    number of scrapes that hit the sample limit and were rejected.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245,
    54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":8,"y":9},"id":19,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"title":"Tardy
    Scrapes [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Number
    of times the database failed to reload block data from disk.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245,
    54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":4,"x":12,"y":9},"id":13,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(sum_over_time(prometheus_tsdb_reloads_failures_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"title":"Reload
    Failures [$interval]","type":"stat"},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Sum
    of all skipped scrapes","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50,
    172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":1},{"color":"rgba(245,
    54, 54, 0.9)","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":8,"x":16,"y":9},"id":20,"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"10.4.3","targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(sum_over_time(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))
    + \nsum(sum_over_time(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))
    + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))
    + \nsum(sum_over_time(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"}[$interval]))
    ","format":"time_series","intervalFactor":2,"refId":"A","step":40}],"title":"Skipped
    Scrapes [$interval]","type":"stat"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":36,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"errors","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"All
    non-zero failures and errors","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":17},"id":33,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(net_conntrack_dialer_conn_failed_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Failed Connections","refId":"A","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_evaluator_iterations_missed_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Missed Iterations","refId":"B","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_evaluator_iterations_skipped_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Skipped Iterations","refId":"C","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_rule_evaluation_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Evaluation","refId":"D","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_azure_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Azure Refresh","refId":"E","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_consul_rpc_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Consul RPC","refId":"F","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_dns_lookup_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"DNS Lookup","refId":"G","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_ec2_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"EC2 Refresh","refId":"H","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_gce_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"GCE Refresh","refId":"I","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_marathon_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Marathon Refresh","refId":"J","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_openstack_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Openstack Refresh","refId":"K","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_sd_triton_refresh_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Triton Refresh","refId":"L","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_target_scrapes_exceeded_sample_limit_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Sample Limit","refId":"M","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_target_scrapes_sample_duplicate_timestamp_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Duplicate Timestamp","refId":"N","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_target_scrapes_sample_out_of_bounds_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Timestamp Out of
    Bounds","refId":"O","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_target_scrapes_sample_out_of_order_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Sample Out of Order","refId":"P","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_treecache_zookeeper_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Zookeeper","refId":"Q","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_tsdb_compactions_failed_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"TSDB Compactions","refId":"R","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_tsdb_head_series_not_found{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Series Not Found","refId":"S","step":2},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(increase(prometheus_tsdb_reloads_failures_total{instance=~\"$instance\"}[5m]))
    > 0","format":"time_series","intervalFactor":2,"legendFormat":"Reload","refId":"T","step":2}],"thresholds":[],"title":"Failures
    and Errors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Errors","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":37,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"up","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":25},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"up{instance=~\"$instance\",job=~\"$job\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"title":"Upness
    (stacked)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"none","label":"Up","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":25},"id":5,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"prometheus_tsdb_head_chunks{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"title":"Storage
    Memory Chunks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Chunks","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":32},"id":38,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"series","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":33},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"prometheus_tsdb_head_series{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"title":"Series
    Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Series","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":33},"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"removed","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(
    increase(prometheus_tsdb_head_series_created_total{instance=~\"$instance\"}[5m])
    )","format":"time_series","intervalFactor":2,"legendFormat":"created","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(
    increase(prometheus_tsdb_head_series_removed_total{instance=~\"$instance\"}[5m])
    )","format":"time_series","intervalFactor":2,"legendFormat":"removed","refId":"B","step":4}],"thresholds":[],"title":"Series
    Created / Removed","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Series
    Count","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":40},"id":39,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"appended
    samples","type":"row"},{"aliasColors":{"10.58.3.10:80":"#BA43A9"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Rate
    of total number of appended samples","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":41},"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"rate(prometheus_tsdb_head_samples_appended_total{job=~\"$job\",instance=~\"$instance\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"title":"Appended
    Samples per Second","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Samples
    / Second","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":48},"id":40,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"sync","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Total
    number of syncs that were executed on a scrape pool.","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":49},"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_target_scrape_pool_sync_total{job=~\"$job\",instance=~\"$instance\"})
    by (scrape_job)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"B","step":4}],"thresholds":[],"title":"Scrape
    Sync Total","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Syncs","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Actual
    interval to sync the scrape pool.","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":49},"id":21,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(prometheus_target_sync_length_seconds_sum{job=~\"$job\",instance=~\"$instance\"}[2m]))
    by (scrape_job) * 1000","format":"time_series","intervalFactor":2,"legendFormat":"{{scrape_job}}","refId":"A","step":4}],"thresholds":[],"title":"Target
    Sync","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":56},"id":41,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"scrapes","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":57},"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"scrape_duration_seconds{instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"title":"Scrape
    Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Total
    number of rejected scrapes","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":57},"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"exceeded
    sample limit","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"duplicate
    timestamp","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_target_scrapes_sample_out_of_bounds_total{job=~\"$job\",instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out
    of bounds","refId":"C","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_target_scrapes_sample_out_of_order_total{job=~\"$job\",instance=~\"$instance\"})
    ","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"out of
    order","refId":"D","step":4}],"thresholds":[],"title":"Rejected Scrapes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Scrapes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":64},"id":42,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"durations","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"The
    duration of rule group evaluations","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":65},"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"1000
    * rate(prometheus_evaluator_duration_seconds_sum{job=~\"$job\", instance=~\"$instance\"}[5m])
    / rate(prometheus_evaluator_duration_seconds_count{job=~\"$job\", instance=~\"$instance\"}[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"E","step":4}],"thresholds":[],"title":"Average
    Rule Evaluation Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Milliseconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":65},"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(http_request_duration_microseconds_count{job=~\"$job\",instance=~\"$instance\"}[1m]))
    by (handler) > 0","format":"time_series","intervalFactor":2,"legendFormat":"{{handler}}","refId":"A","step":4}],"thresholds":[],"title":"HTTP
    Request Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Microseconds","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":72},"id":15,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(prometheus_engine_query_duration_seconds_sum{job=~\"$job\",instance=~\"$instance\"})
    by (slice)","format":"time_series","intervalFactor":2,"legendFormat":"{{slice}}","refId":"A","step":4}],"thresholds":[],"title":"Prometheus
    Engine Query Duration Seconds","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"Rule-group
    evaluations \n - total\n - missed due to slow rule group evaluation\n - skipped
    due to throttled metric storage","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":72},"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(prometheus_evaluator_iterations_total{job=~\"$job\",
    instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Total","refId":"B","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(prometheus_evaluator_iterations_missed_total{job=~\"$job\",
    instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Missed","refId":"A","step":4},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(prometheus_evaluator_iterations_skipped_total{job=~\"$job\",
    instance=~\"$instance\"}[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Skipped","refId":"C","step":4}],"thresholds":[],"title":"Rule
    Evaluator Iterations","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"iterations","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":79},"id":43,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"notifications","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":80},"id":22,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"rate(prometheus_notifications_sent_total[5m])","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"title":"Notifications
    Sent","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Notifications","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":87},"id":44,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"config","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":88},"id":23,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"(time()
    - prometheus_config_last_reload_success_timestamp_seconds{job=~\"$job\",instance=~\"$instance\"})
    / 60","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"title":"Minutes
    Since Successful Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Minutes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":88},"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"prometheus_config_last_reload_successful{job=~\"$job\",instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":4}],"thresholds":[],"title":"Successful
    Config Reload","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"Success","logBase":1,"max":"1","min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":95},"id":45,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"garbage
    collection","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"GC
    invocation durations","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":96},"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(go_gc_duration_seconds_sum{instance=~\"$instance\",job=~\"$job\"}[2m]))
    by (instance)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"A","step":2}],"thresholds":[],"title":"GC
    Rate / 2m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}]},{"collapsed":true,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"gridPos":{"h":1,"w":24,"x":0,"y":103},"id":46,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"description":"This
    is probably wrong!  Please help.","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":104},"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"allocated","stack":false}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_alloc_bytes_total{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"alloc_bytes_total","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_alloc_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"allocated","refId":"B","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_buck_hash_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"profiling
    bucket hash table","refId":"C","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_gc_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"GC
    metadata","refId":"D","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_heap_alloc_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    in-use","refId":"E","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_heap_idle_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    idle","refId":"F","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_heap_inuse_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    in use","refId":"G","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_heap_released_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    released","refId":"H","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_heap_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    system","refId":"I","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_mcache_inuse_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache
    in use","refId":"J","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_mcache_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mcache
    sys","refId":"K","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_mspan_inuse_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan
    in use","refId":"L","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_mspan_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"mspan
    sys","refId":"M","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_next_gc_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"heap
    next gc","refId":"N","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_other_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"other
    sys","refId":"O","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_stack_inuse_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack
    in use","refId":"P","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_stack_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"stack
    sys","refId":"Q","step":10},{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(go_memstats_sys_bytes{job=~\"$job\",
    instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"legendFormat":"sys","refId":"R","step":10}],"thresholds":[],"title":"Go
    Memory Usage (FIXME)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":6,"x":12,"y":104},"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"prometheus_target_interval_length_seconds{instance=~\"$instance\",
    job=~\"$job\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{quantile}}
    {{interval}}","refId":"A","step":20}],"thresholds":[],"title":"Scrape Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Seconds","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":6,"x":18,"y":104},"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"expr":"sum(rate(prometheus_target_interval_length_seconds_count{job=~\"$job\",instance=~\"$instance\"}[5m]))
    by (interval)","format":"time_series","intervalFactor":2,"legendFormat":"{{interval}}","refId":"A","step":20}],"thresholds":[],"title":"Target
    Scrapes / 5m","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"Scrapes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}]}],"targets":[{"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"refId":"A"}],"title":"Broken,
    ignore","type":"row"}],"refresh":"30s","schemaVersion":39,"tags":[],"templating":{"list":[{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"definition":"","hide":0,"includeAll":true,"multi":true,"name":"job","options":[],"query":"query_result(prometheus_tsdb_head_samples_appended_total)","refresh":2,"regex":"/.*job=\"([^\"]+)/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"definition":"","hide":0,"includeAll":true,"multi":true,"name":"instance","options":[],"query":"query_result(up{job=~\"$job\"})","refresh":2,"regex":"/.*instance=\"([^\"]+).*/","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"1h","value":"1h"},"hide":0,"includeAll":false,"multi":false,"name":"interval","options":[{"selected":true,"text":"1h","value":"1h"},{"selected":false,"text":"3h","value":"3h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"2d","value":"2d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"30d","value":"30d"},{"selected":false,"text":"90d","value":"90d"},{"selected":false,"text":"180d","value":"180d"}],"query":"1h,
    3h, 6h, 12h, 1d, 2d, 7d, 30d, 90d, 180d","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Prometheus
    2.0 Overview","uid":"eevp926ufso3ke","version":1,"weekStart":""}'
  go-process-dashboard.json: '{"__inputs":[],"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"5.1.4"},{"type":"panel","id":"graph","name":"Graph","version":"5.0.0"},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"5.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"description":"Process status published by Go
    Prometheus client library, e.g. memory used, fds open, GC details","editable":true,"gnetId":6671,"graphTooltip":0,"id":null,"iteration":1530003369936,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":8,"w":12,"x":0,"y":0},"id":1,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"resident","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"process_resident_memory_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - resident","metric":"process_resident_memory_bytes","refId":"A","step":4},{"expr":"process_virtual_memory_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - virtual","metric":"process_virtual_memory_bytes","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"process
    memory","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":4,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"resident","yaxis":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(process_resident_memory_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - resident","metric":"process_resident_memory_bytes","refId":"A","step":4},{"expr":"deriv(process_virtual_memory_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - virtual","metric":"process_virtual_memory_bytes","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"process
    memory deriv","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":8},"id":2,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"alloc
    rate","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"go_memstats_alloc_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - bytes allocated","metric":"go_memstats_alloc_bytes","refId":"A","step":4},{"expr":"rate(go_memstats_alloc_bytes_total{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[30s])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - alloc rate","metric":"go_memstats_alloc_bytes_total","refId":"B","step":4},{"expr":"go_memstats_stack_inuse_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - stack inuse","metric":"go_memstats_stack_inuse_bytes","refId":"C","step":4},{"expr":"go_memstats_heap_inuse_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{pod}}
    - heap inuse","metric":"go_memstats_heap_inuse_bytes","refId":"D","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"go
    memstats","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":8},"id":5,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"alloc
    rate","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"deriv(go_memstats_alloc_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - bytes allocated","metric":"go_memstats_alloc_bytes","refId":"A","step":4},{"expr":"rate(go_memstats_alloc_bytes_total{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - alloc rate","metric":"go_memstats_alloc_bytes_total","refId":"B","step":4},{"expr":"deriv(go_memstats_stack_inuse_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}
    - stack inuse","metric":"go_memstats_stack_inuse_bytes","refId":"C","step":4},{"expr":"deriv(go_memstats_heap_inuse_bytes{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{pod}}
    - heap inuse","metric":"go_memstats_heap_inuse_bytes","refId":"D","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"go
    memstats deriv","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":15},"id":3,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"process_open_fds{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","metric":"process_open_fds","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"open
    fds","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":15},"id":6,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"deriv(process_open_fds{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}[$interval])","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","metric":"process_open_fds","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"open
    fds deriv","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":22},"id":7,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"go_goroutines{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","metric":"go_goroutines","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Goroutines","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":22},"id":8,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"go_gc_duration_seconds{namespace=~\"^($namespace)$\",pod=~\"^($pod)$\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}:
    {{quantile}}","metric":"go_gc_duration_seconds","refId":"A","step":4}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"GC
    duration quantiles","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"30s","schemaVersion":16,"style":"dark","tags":[],"templating":{"list":[{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"hide":0,"includeAll":true,"label":null,"multi":true,"name":"namespace","options":[],"query":"label_values(go_memstats_alloc_bytes,
    namespace)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"hide":0,"includeAll":true,"label":null,"multi":true,"name":"pod","options":[],"query":"label_values(process_resident_memory_bytes,
    pod)","refresh":2,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"auto":false,"auto_count":30,"auto_min":"10s","current":{"text":"5m","value":"5m"},"datasource":null,"hide":0,"includeAll":false,"label":"","multi":false,"name":"interval","options":[{"selected":false,"text":"1m","value":"1m"},{"selected":true,"text":"5m","value":"5m"},{"selected":false,"text":"10m","value":"10m"},{"selected":false,"text":"30m","value":"30m"},{"selected":false,"text":"1h","value":"1h"}],"query":"1m,5m,10m,30m,1h","refresh":2,"type":"interval"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Go
    Processes","uid":"ypFZFgvmz","version":6}'
  node-basic-metrics.json: '{"__inputs":[],"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"6.0.1"},{"type":"panel","id":"graph","name":"Graph","version":"5.0.0"},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"5.0.0"},{"type":"panel","id":"singlestat","name":"Singlestat","version":"5.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"description":"node.js prometheus client basic
    metrics","editable":true,"gnetId":11159,"graphTooltip":0,"id":null,"iteration":1573392431370,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":10,"x":0,"y":0},"id":6,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"irate(process_cpu_user_seconds_total{instance=~\"$instance\"}[2m])
    * 100","format":"time_series","intervalFactor":1,"legendFormat":"User CPU - {{instance}}","refId":"A"},{"expr":"irate(process_cpu_system_seconds_total{instance=~\"$instance\"}[2m])
    * 100","format":"time_series","intervalFactor":1,"legendFormat":"Sys CPU - {{instance}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Process
    CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":9,"x":10,"y":0},"id":8,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_eventloop_lag_seconds{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Event
    Loop Lag","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237,
    129, 40, 0.89)","#d44a3a"],"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":5,"x":19,"y":0},"id":2,"interval":"","links":[],"mappingType":1,"mappingTypes":[{"name":"value
    to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31,
    118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"__name__","targets":[{"expr":"sum(nodejs_version_info{instance=~\"$instance\"})
    by (version)","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{version}}","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Node.js
    Version","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"name"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237,
    129, 40, 0.89)","#d44a3a"],"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":5,"x":19,"y":3},"id":4,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value
    to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31,
    118, 189, 0.18)","full":false,"lineColor":"#F2495C","show":true},"tableColumn":"","targets":[{"expr":"sum(changes(process_start_time_seconds{instance=~\"$instance\"}[1m]))","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Process
    Restart Times","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":16,"x":0,"y":7},"id":7,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"process_resident_memory_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Process
    Memory - {{instance}}","refId":"A"},{"expr":"nodejs_heap_size_total_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heap
    Total - {{instance}}","refId":"B"},{"expr":"nodejs_heap_size_used_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heap
    Used - {{instance}}","refId":"C"},{"expr":"nodejs_external_memory_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"External
    Memory - {{instance}}","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Process
    Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":7,"w":8,"x":16,"y":7},"id":9,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_active_handles_total{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Active
    Handler - {{instance}}","refId":"A"},{"expr":"nodejs_active_requests_total{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Active
    Request - {{instance}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Active
    Handlers/Requests Total","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":8,"w":8,"x":0,"y":14},"id":10,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_heap_space_size_total_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heap
    Total - {{instance}} - {{space}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap
    Total Detail","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":8,"w":8,"x":8,"y":14},"id":11,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_heap_space_size_used_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heap
    Used - {{instance}} - {{space}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap
    Used Detail","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"fill":1,"gridPos":{"h":8,"w":8,"x":16,"y":14},"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_heap_space_size_available_bytes{instance=~\"$instance\"}","format":"time_series","intervalFactor":1,"legendFormat":"Heap
    Used - {{instance}} - {{space}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap
    Available Detail","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"schemaVersion":18,"style":"dark","tags":["nodejs"],"templating":{"list":[{"allValue":null,"current":{},"datasource":{"type":"prometheus","uid":"PBFA97CFB590B2093"},"definition":"label_values(nodejs_version_info,
    instance)","hide":0,"includeAll":true,"label":"instance","multi":true,"name":"instance","options":[],"query":"label_values(nodejs_version_info,
    instance)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"NodeJS
    Application Dashboard","uid":"PTSqcpJWk","version":4}'
  node-quickstart.json: '{"__inputs":[],"__requires":[{"id":"grafana","name":"Grafana","type":"grafana","version":"7.4.3"},{"id":"graph","name":"Graph","type":"panel","version":""},{"id":"prometheus","name":"Prometheus","type":"datasource","version":"1.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"},{"datasource":"$datasource","enable":true,"expr":"process_start_time_seconds{job=~\"$job\",
    instance=~\"$instance\"} * 1000","hide":false,"iconColor":"#B877D9","name":"Node.js
    Start","showIn":0,"textFormat":"{{instance}}","titleFormat":"Node.js Start","useValueForTime":true}]},"description":"A
    quickstart to setup the Prometheus Node.js Exporter with preconfigured dashboards,
    alerting rules, and recording rules.","editable":true,"gnetId":14058,"graphTooltip":0,"id":1,"iteration":1608497517213,"links":[],"panels":[{"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":1,"title":"Overview","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237,
    129, 40, 0.89)","#d44a3a"],"datasource":"$datasource","description":"The version
    of Node.js.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":3,"x":0,"y":1},"id":2,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value
    to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.6.2","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31,
    118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"version","targets":[{"expr":"nodejs_version_info","format":"table","instant":true,"legendFormat":"","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Node.js
    Version","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"first"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237,
    129, 40, 0.89)","#d44a3a"],"datasource":"$datasource","description":"The number
    of times Node.js restarted.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":3,"x":3,"y":1},"id":3,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value
    to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"pluginVersion":"6.6.2","postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31,
    118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(changes(process_start_time_seconds{job=~\"$job\",
    instance=~\"$instance\", hostname=~\"$hostname\"}[$__range]))","instant":false,"legendFormat":"Node.js","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Node.js
    Restarts","type":"singlestat","valueFontSize":"80%","valueMaps":[],"valueName":"current"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":3},"id":4,"panels":[],"title":"Process","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"CPU
    usage.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":8,"x":0,"y":4},"hiddenSeries":false,"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(process_cpu_user_seconds_total{job=~\"$job\",
    instance=~\"$instance\"}[1m]) * 100","interval":"","legendFormat":"User CPU -
    {{instance}}","refId":"A"},{"expr":"irate(process_cpu_system_seconds_total{job=~\"$job\",
    instance=~\"$instance\"}[1m]) * 100","interval":"","legendFormat":"System CPU
    - {{instance}}","refId":"B"},{"expr":"irate(process_cpu_seconds_total{job=~\"$job\",
    instance=~\"$instance\"}[1m]) * 100","interval":"","legendFormat":"Total CPU -
    {{instance}}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU
    Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"CPU
    time spent.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":8,"x":8,"y":4},"hiddenSeries":false,"id":6,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(process_cpu_seconds_total{job=~\"$job\",
    instance=~\"$instance\"}[$interval])","interval":"","legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU
    Time Spent","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Memory
    usage.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":8,"x":16,"y":4},"hiddenSeries":false,"id":7,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"process_resident_memory_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Process Memory - {{instance}}","refId":"A"},{"expr":"nodejs_heap_size_total_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Heap Total - {{instance}}","refId":"B"},{"expr":"nodejs_heap_size_used_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Heap Used - {{instance}}","refId":"C"},{"expr":"nodejs_external_memory_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"External Memory - {{instance}}","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory
    Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Number
    of active handle and active requests.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":8,"x":0,"y":13},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_active_handles_total{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Active Handler - {{instance}}","refId":"A"},{"expr":"nodejs_active_requests_total{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Active Request - {{instance}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Active
    Handlers and Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Latency
    of the event loop.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":8,"x":8,"y":13},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_eventloop_lag_seconds{job=~\"$job\",
    instance=~\"$instance\"}","hide":false,"instant":false,"interval":"","legendFormat":"Last
    - {{instance}}","refId":"A"},{"expr":"nodejs_eventloop_lag_p99_seconds{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"P99 - {{instance}}","refId":"B"},{"expr":"nodejs_eventloop_lag_p50_seconds{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"P50 - {{instance}}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Event
    Loop Latency","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":22},"id":10,"panels":[],"title":"Garbage
    Collector","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Rate
    of garbage collection duration.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":23},"hiddenSeries":false,"id":11,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(nodejs_gc_duration_seconds_sum{job=~\"$job\",
    instance=~\"$instance\"}[$interval])","interval":"","legendFormat":"{{kind}} -
    {{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GC
    Duration Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"s","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Duration
    of garbage collection.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":8,"y":23},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_gc_duration_seconds_sum{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"{{kind}} - {{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GC
    Duration","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"s","label":"","logBase":2,"max":null,"min":null,"show":true},{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Usage
    of heap memory.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":16,"y":23},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_heap_size_total_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Total - {{instance}}","refId":"A"},{"expr":"nodejs_heap_size_used_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Used - {{instance}}","refId":"B"},{"expr":"process_resident_memory_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"Resident - {{instance}}","refId":"C"},{"expr":"nodejs_external_memory_bytes{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"External - {{instance}}","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap
    Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Rate
    of garbage collection.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":31},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(nodejs_gc_duration_seconds_count{job=~\"$job\",
    instance=~\"$instance\"}[$interval])","interval":"","legendFormat":"{{instance}}
    - {{kind}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GC
    Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Count
    of garbage collection.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":8,"y":31},"hiddenSeries":false,"id":15,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"nodejs_gc_duration_seconds_count{job=~\"$job\",
    instance=~\"$instance\"}","interval":"","legendFormat":"{{kind}} - {{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GC
    Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":2,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","description":"Usage
    of heap space.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":16,"y":31},"hiddenSeries":false,"id":16,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.0-beta2","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"nodejs_heap_space_size_used_bytes{instance=~\"$instance\"}","interval":"","legendFormat":"{{space}}
    - {{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Heap
    Space Used","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":26,"style":"dark","tags":["node.js","nodejs"],"templating":{"list":[{"current":{"selected":false,"text":"prometheus","value":"prometheus"},"error":null,"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"datasource","options":[],"query":"prometheus","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"$datasource","definition":"label_values(nodejs_eventloop_lag_seconds,
    job)","error":null,"hide":0,"includeAll":true,"label":"Job","multi":true,"name":"job","options":[],"query":"label_values(nodejs_eventloop_lag_seconds,
    job)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"$datasource","definition":"label_values(nodejs_eventloop_lag_seconds,
    instance)","error":null,"hide":0,"includeAll":true,"label":"Instance","multi":true,"name":"instance","options":[],"query":"label_values(nodejs_eventloop_lag_seconds,
    instance)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"auto":false,"auto_count":30,"auto_min":"10s","current":{"selected":false,"text":"1m","value":"1m"},"error":null,"hide":0,"label":"Interval","name":"interval","options":[{"selected":true,"text":"1m","value":"1m"},{"selected":false,"text":"10m","value":"10m"},{"selected":false,"text":"30m","value":"30m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"14d","value":"14d"},{"selected":false,"text":"30d","value":"30d"}],"query":"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d","refresh":2,"skipUrlSync":false,"type":"interval"}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Node.js
    Exporter Quickstart and Dashboard","uid":"yX2d7k1Gk","version":1}'
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: promtail
  namespace: default
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: promtail
rules:
- apiGroups:
  - ''
  resources:
  - nodes
  - nodes/proxy
  - services
  - endpoints
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: promtail
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: promtail
subjects:
- kind: ServiceAccount
  name: promtail
  namespace: default
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: promtail-config
  namespace: default
data:
  promtail.yaml: "server:\n  http_listen_port: 9080\n  grpc_listen_port: 0\nclients:\n\
    \  - url: http://loki.default.svc.cluster.local:3100/loki/api/v1/push\npositions:\n\
    \  filename: /run/promtail/positions.yaml\nscrape_configs:\n  - job_name: kubernetes-pods\n\
    \    pipeline_stages:\n      - docker: {}\n    kubernetes_sd_configs:\n      -\
    \ role: pod\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_container_name]\n\
    \        target_label: container\n      - source_labels: [__meta_kubernetes_pod_node_name]\n\
    \        target_label: node\n      - source_labels: [__meta_kubernetes_namespace]\n\
    \        target_label: namespace\n      - action: replace\n        replacement:\
    \ $1\n        source_labels: [__meta_kubernetes_pod_label_app]\n        target_label:\
    \ app\n      - action: replace\n        replacement: /var/log/pods/*$1/*.log\n\
    \        separator: /\n        source_labels: [__meta_kubernetes_pod_uid, __meta_kubernetes_pod_container_name]\n\
    \        target_label: __path__\n"
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: promtail
  namespace: default
spec:
  selector:
    matchLabels:
      name: promtail
  template:
    metadata:
      labels:
        name: promtail
    spec:
      serviceAccountName: promtail
      containers:
      - name: promtail
        image: grafana/promtail:2.9.8
        args:
        - -config.file=/etc/promtail/promtail.yaml
        volumeMounts:
        - name: config
          mountPath: /etc/promtail
        - name: pods
          mountPath: /var/log/pods
          readOnly: true
        - name: positions
          mountPath: /run/promtail
      volumes:
      - name: config
        configMap:
          name: promtail-config
      - name: pods
        hostPath:
          path: /var/log/pods
      - name: positions
        emptyDir: {}
